{"ast":null,"code":"import axios from 'axios';\nimport { onMounted } from 'vue';\nexport default {\n  name: 'list',\n  data() {\n    return {\n      list: [],\n      editedInfo: {}\n    };\n  },\n  created() {\n    this.getAll();\n  },\n  methods: {\n    async getAll() {\n      try {\n        const ins = await axios.get('getList');\n        this.list = ins.data;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async deleteBeneficiary(entryId) {\n      try {\n        const response = await axios.post(`deleteBeneficiary/${entryId}`);\n        if (response.status === 200) {\n          console.log(response.data.message);\n          this.getAll();\n        }\n      } catch (error) {\n        console.error(error.response.data.error);\n      }\n    },\n    async editBeneficiary(entryId) {\n      // Find the entry in the list based on entryId\n      const selectedEntry = this.list.find(entry => entry.ENTRY_ID === entryId);\n\n      // Set the editedInfo data\n      this.editedInfo = {\n        ...selectedEntry\n      };\n\n      // Show the modal\n      // Use nextTick to wait for the component to be mounted\n      this.$nextTick(() => {\n        const modal = new bootstrap.Modal(this.$refs.editModal);\n        modal.show();\n      });\n    },\n    async saveChanges() {\n      try {\n        // Send the updated data and ID to the backend\n        const response = await axios.post(`updateBeneficiary/${this.editedInfo.ENTRY_ID}`, this.editedInfo);\n        if (response.status === 200) {\n          console.log(response.data.message);\n          const modal = new bootstrap.Modal(this.$refs.editModal);\n          modal.hide(); // Close the Bootstrap modal\n          this.getAll(); // Refresh the data\n        }\n      } catch (error) {\n        console.error(error.response.data.error);\n      }\n    },\n    closeModal() {\n      // Manually close the modal using JavaScript\n      const modal = new bootstrap.Modal(this.$refs.editModal);\n      modal.hide();\n    }\n  }\n};","map":{"version":3,"names":["axios","onMounted","name","data","list","editedInfo","created","getAll","methods","ins","get","error","console","log","deleteBeneficiary","entryId","response","post","status","message","editBeneficiary","selectedEntry","find","entry","ENTRY_ID","$nextTick","modal","bootstrap","Modal","$refs","editModal","show","saveChanges","hide","closeModal"],"sources":["C:\\laragon\\www\\frontend\\src\\components\\admin\\list.vue"],"sourcesContent":["<template>\r\n    <div class=\"container mt-5\">\r\n        <div class=\"row mt-5\">\r\n\r\n            <div class=\"modal fade\" id=\"editModal\" tabindex=\"-1\" aria-labelledby=\"editModalLabel\" aria-hidden=\"true\" ref=\"editModal\">\r\n                <div class=\"modal-dialog modal-lg\">\r\n                  <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                      <h5 class=\"modal-title\" id=\"editModalLabel\">Edit Beneficiary</h5>\r\n                      <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                    </div>\r\n                    <form  @submit.prevent=\"update\" method=\"post\">\r\n                    <div class=\"modal-body\">\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"editRegion\" class=\"form-label\">Region:</label>\r\n                        <input type=\"text\" name=\"region\" v-model=\"editedInfo.REGION\" class=\"form-control\" id=\"editRegion\">\r\n                      </div>\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"editProvince\" class=\"form-label\">Province:</label>\r\n                        <input type=\"text\" name=\"province\" v-model=\"editedInfo.PROVINCE\" class=\"form-control\" id=\"editProvince\">\r\n                      </div>\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"editMunicipality\" class=\"form-label\">Municipality:</label>\r\n                        <input type=\"text\" name=\"municipality\" v-model=\"editedInfo.MUNICIPALITY\" class=\"form-control\" id=\"editMunicipality\">\r\n                      </div>\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"editFName\" class=\"form-label\">First Name:</label>\r\n                        <input type=\"text\" name=\"fName\" v-model=\"editedInfo.FIRST_NAME\" class=\"form-control\" id=\"editFName\">\r\n                      </div>\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"editMName\" class=\"form-label\">Middle Name:</label>\r\n                        <input type=\"text\" name=\"mName\" v-model=\"editedInfo.MIDDLE_NAME\" class=\"form-control\" id=\"editMName\">\r\n                      </div>\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"editFName\" class=\"form-label\">Last Name:</label>\r\n                        <input type=\"text\" name=\"lName\" v-model=\"editedInfo.LAST_NAME\" class=\"form-control\" id=\"editFName\">\r\n                      </div>\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"editBday\" class=\"form-label\">Birthday:</label>\r\n                        <input type=\"text\" name=\"bday\" v-model=\"editedInfo.BIRTHDAY\" class=\"form-control\" id=\"editBday\">\r\n                      </div>\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"editAge\" class=\"form-label\">Age:</label>\r\n                        <input type=\"text\" name=\"age\" v-model=\"editedInfo.AGE\" class=\"form-control\" id=\"editAge\">\r\n                      </div>\r\n                      <div class=\"mb-3\">\r\n                        <label for=\"editSex\" class=\"form-label\">Sex:</label>\r\n                        <input type=\"text\" name=\"sex\" v-model=\"editedInfo.SEX\" class=\"form-control\" id=\"editSex\">\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                      <button type=\"button\" class=\"btn btn-secondary\" id=\"close\" @click=\"closeModal\">Close</button>\r\n                      <button type=\"submit\" class=\"btn btn-primary\" @click=\"saveChanges\">Save changes</button>\r\n                    </div>\r\n                </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n    <div class=\"card-body\">\r\n        <div class=\"table-responsive\">\r\n            <table class=\"table table-bordered\" id=\"dataTable\" width=\"100%\" cellspacing=\"0\">\r\n                <thead>\r\n                    <tr class=\"text-center\">\r\n                        <th class=\"font-weight-bold\">ACTIONS</th>\r\n                        <th class=\"font-weight-bold\">FIRSTNAME</th>\r\n                        <th class=\"font-weight-bold\">MIDDLENAME</th>\r\n                        <th class=\"font-weight-bold\">LASTNAME</th>\r\n                        <th class=\"font-weight-bold\">MUNICIPALITY</th>\r\n                        <th class=\"font-weight-bold\">BARANGAY</th>\r\n                        <th class=\"font-weight-bold\">HH_ID</th>\r\n                        <th class=\"font-weight-bold\">ENTRY_ID</th>\r\n                        <th class=\"font-weight-bold\">SEX</th>\r\n                        <th class=\"font-weight-bold\">AGE</th>\r\n                        <th class=\"font-weight-bold\">BIRTHDAY</th>\r\n                        <th class=\"font-weight-bold\">CLIENT_STATUS</th>\r\n                        <th class=\"font-weight-bold\">EXT_NAME</th>\r\n                        <th class=\"font-weight-bold\">REGISTRATION_STATUS</th>\r\n                        <th class=\"font-weight-bold\">HH_SET</th>\r\n                        <th class=\"font-weight-bold\">SOLO_PARENT</th>\r\n                        <th class=\"font-weight-bold\">IP_AFFILIATION</th>\r\n                        <th class=\"font-weight-bold\">PREGNANCY_STATUS</th>\r\n                        <th class=\"font-weight-bold\">HEALTH_FACILITY</th>\r\n                        <th class=\"font-weight-bold\">CHILD_BENE</th>\r\n                        <th class=\"font-weight-bold\">GRADE_LEVEL</th>\r\n                        <th class=\"font-weight-bold\">ATTEND_SCHOOL</th>\r\n                        <th class=\"font-weight-bold\">SCHOOL_NAME</th>\r\n                        <th class=\"font-weight-bold\">MONITORED_EDUC</th>\r\n                        <th class=\"font-weight-bold\">REASON_FOR_NOT_ATTENDING_EDUC</th>\r\n                        <th class=\"font-weight-bold\">DATE_REASON_EDUC</th>\r\n                        <th class=\"font-weight-bold\">MONITORED_HEALTH</th>\r\n                        <th class=\"font-weight-bold\">REASON_FOR_NOT_ATTENDING_HEALTH</th>\r\n                        <th class=\"font-weight-bold\">DATE_REASON_HEALTH</th>\r\n                        <th class=\"font-weight-bold\">DISABILITY_ID</th>\r\n                        <th class=\"font-weight-bold\">DISABILITY_STATUS</th>\r\n                        <th class=\"font-weight-bold\">LRN</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <tr v-for=\"info in list\" class=\"text-center\">\r\n                        <td>\r\n                          <button @click=\"deleteBeneficiary(info.ENTRY_ID)\" class=\"btn btn-danger\" style=\"--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;\">\r\n                            <i class=\"fas fa-trash\"></i> DELETE\r\n                          </button>\r\n                          <button @click=\"editBeneficiary(info.ENTRY_ID)\" class=\"btn btn-primary\" style=\"--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;\">\r\n                            <i class=\"fas fa-edit\"></i> EDIT\r\n                          </button>\r\n                        </td>\r\n                        <td>{{info.FIRST_NAME}}</td>\r\n                        <td>{{info.MIDDLE_NAME}}</td>\r\n                        <td>{{info.LAST_NAME}}</td>\r\n                        <td>{{info.MUNICIPALITY}}</td>\r\n                        <td>{{info.BRGY}}</td>\r\n                        <td>{{info.HH_ID}}</td>\r\n                        <td>{{info.ENTRY_ID}}</td>\r\n                        <td>{{info.SEX}}</td>\r\n                        <td>{{info.AGE}}</td>\r\n                        <td>{{info.BIRTHDAY ? new Date(info.BIRTHDAY).toLocaleDateString() : ''}}</td>\r\n                        <td>{{info.CLIENT_STATUS}}</td>\r\n                        <td>{{info.EXT_NAME}}</td>\r\n                        <td>{{info.REGISTRATION_STATUS}}</td>\r\n                        <td>{{info.HH_SET}}</td>\r\n                        <td>{{info.SOLO_PARENT}}</td>\r\n                        <td>{{info.IP_AFFILIATION}}</td>\r\n                        <td>{{info.PREGNANCY_STATUS}}</td>\r\n                        <td>{{info.HEALTH_FACILITY}}</td>\r\n                        <td>{{info.CHILD_BENE}}</td>\r\n                        <td>{{info.GRADE_LEVEL}}</td>\r\n                        <td>{{info.ATTEND_SCHOOL}}</td>\r\n                        <td>{{info.SCHOOL_NAME}}</td>\r\n                        <td>{{info.MONITORED_EDUC}}</td>\r\n                        <td>{{info.REASON_FOR_NOT_ATTENDING_EDUC}}</td>\r\n                        <td>{{info.DATE_REASON_EDUC ? new Date(info.DATE_REASON_EDUC).toLocaleDateString() : ''}}</td>\r\n                        <td>{{info.MONITORED_HEALTH}}</td>\r\n                        <td>{{info.REASON_FOR_NOT_ATTENDING_HEALTH}}</td>\r\n                        <td>{{info.DATE_REASON_HEALTH ? new Date(info.DATE_REASON_HEALTH).toLocaleDateString() : ''}}</td>\r\n                        <td>{{info.DISABILITY_ID}}</td>\r\n                        <td>{{info.DISABILITY_STATUS}}</td>\r\n                        <td>{{info.LRN}}</td>\r\n                      </tr>            \r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n</div>\r\n</template>\r\n<script>\r\nimport axios from 'axios'\r\nimport { onMounted } from 'vue'\r\nexport default{\r\n    name:'list',\r\n  \r\ndata(){\r\n            return{\r\n                list:[],\r\n                editedInfo: {}, \r\n            }\r\n        },\r\n\r\n    created() {\r\n        this.getAll();\r\n    },\r\n    methods:{\r\n        async getAll(){\r\n            try {\r\n              const ins =  await axios.get('getList');\r\n                    this.list = ins.data;\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        },\r\n        async deleteBeneficiary(entryId) {\r\n        try {\r\n            const response = await axios.post(`deleteBeneficiary/${entryId}`);\r\n            if (response.status === 200) {\r\n                console.log(response.data.message);\r\n                this.getAll();\r\n        } \r\n        } catch (error) {\r\n            console.error(error.response.data.error);\r\n        }\r\n    },async editBeneficiary(entryId) {\r\n      // Find the entry in the list based on entryId\r\n      const selectedEntry = this.list.find((entry) => entry.ENTRY_ID === entryId);\r\n\r\n      // Set the editedInfo data\r\n      this.editedInfo = { ...selectedEntry };\r\n\r\n      // Show the modal\r\n       // Use nextTick to wait for the component to be mounted\r\n       this.$nextTick(() => {\r\n    const modal = new bootstrap.Modal(this.$refs.editModal);\r\n    modal.show();\r\n  });\r\n},\r\n\r\nasync saveChanges() {\r\n      try {\r\n        // Send the updated data and ID to the backend\r\n        const response = await axios.post(`updateBeneficiary/${this.editedInfo.ENTRY_ID}`, this.editedInfo);\r\n\r\n        if (response.status === 200) {\r\n          console.log(response.data.message);\r\n          const modal = new bootstrap.Modal(this.$refs.editModal);\r\n          modal.hide(); // Close the Bootstrap modal\r\n          this.getAll(); // Refresh the data\r\n        }\r\n      } catch (error) {\r\n        console.error(error.response.data.error);\r\n      }\r\n    },\r\n\r\n    closeModal() {\r\n      // Manually close the modal using JavaScript\r\n      const modal = new bootstrap.Modal(this.$refs.editModal);\r\n      modal.hide();\r\n    },\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"mappings":"AAoJA,OAAOA,KAAI,MAAO,OAAM;AACxB,SAASC,SAAQ,QAAS,KAAI;AAC9B,eAAc;EACVC,IAAI,EAAC,MAAM;EAEfC,IAAIA,CAAA,EAAE;IACM,OAAM;MACFC,IAAI,EAAC,EAAE;MACPC,UAAU,EAAE,CAAC;IACjB;EACJ,CAAC;EAELC,OAAOA,CAAA,EAAG;IACN,IAAI,CAACC,MAAM,CAAC,CAAC;EACjB,CAAC;EACDC,OAAO,EAAC;IACJ,MAAMD,MAAMA,CAAA,EAAE;MACV,IAAI;QACF,MAAME,GAAE,GAAK,MAAMT,KAAK,CAACU,GAAG,CAAC,SAAS,CAAC;QACjC,IAAI,CAACN,IAAG,GAAIK,GAAG,CAACN,IAAI;MAC5B,EAAE,OAAOQ,KAAK,EAAE;QACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IACJ,CAAC;IACD,MAAMG,iBAAiBA,CAACC,OAAO,EAAE;MACjC,IAAI;QACA,MAAMC,QAAO,GAAI,MAAMhB,KAAK,CAACiB,IAAI,CAAE,qBAAoBF,OAAQ,EAAC,CAAC;QACjE,IAAIC,QAAQ,CAACE,MAAK,KAAM,GAAG,EAAE;UACzBN,OAAO,CAACC,GAAG,CAACG,QAAQ,CAACb,IAAI,CAACgB,OAAO,CAAC;UAClC,IAAI,CAACZ,MAAM,CAAC,CAAC;QACrB;MACA,EAAE,OAAOI,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAACK,QAAQ,CAACb,IAAI,CAACQ,KAAK,CAAC;MAC5C;IACJ,CAAC;IAAC,MAAMS,eAAeA,CAACL,OAAO,EAAE;MAC/B;MACA,MAAMM,aAAY,GAAI,IAAI,CAACjB,IAAI,CAACkB,IAAI,CAAEC,KAAK,IAAKA,KAAK,CAACC,QAAO,KAAMT,OAAO,CAAC;;MAE3E;MACA,IAAI,CAACV,UAAS,GAAI;QAAE,GAAGgB;MAAc,CAAC;;MAEtC;MACC;MACA,IAAI,CAACI,SAAS,CAAC,MAAM;QACxB,MAAMC,KAAI,GAAI,IAAIC,SAAS,CAACC,KAAK,CAAC,IAAI,CAACC,KAAK,CAACC,SAAS,CAAC;QACvDJ,KAAK,CAACK,IAAI,CAAC,CAAC;MACd,CAAC,CAAC;IACJ,CAAC;IAED,MAAMC,WAAWA,CAAA,EAAG;MACd,IAAI;QACF;QACA,MAAMhB,QAAO,GAAI,MAAMhB,KAAK,CAACiB,IAAI,CAAE,qBAAoB,IAAI,CAACZ,UAAU,CAACmB,QAAS,EAAC,EAAE,IAAI,CAACnB,UAAU,CAAC;QAEnG,IAAIW,QAAQ,CAACE,MAAK,KAAM,GAAG,EAAE;UAC3BN,OAAO,CAACC,GAAG,CAACG,QAAQ,CAACb,IAAI,CAACgB,OAAO,CAAC;UAClC,MAAMO,KAAI,GAAI,IAAIC,SAAS,CAACC,KAAK,CAAC,IAAI,CAACC,KAAK,CAACC,SAAS,CAAC;UACvDJ,KAAK,CAACO,IAAI,CAAC,CAAC,EAAE;UACd,IAAI,CAAC1B,MAAM,CAAC,CAAC,EAAE;QACjB;MACF,EAAE,OAAOI,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAACK,QAAQ,CAACb,IAAI,CAACQ,KAAK,CAAC;MAC1C;IACF,CAAC;IAEDuB,UAAUA,CAAA,EAAG;MACX;MACA,MAAMR,KAAI,GAAI,IAAIC,SAAS,CAACC,KAAK,CAAC,IAAI,CAACC,KAAK,CAACC,SAAS,CAAC;MACvDJ,KAAK,CAACO,IAAI,CAAC,CAAC;IACd;EACA;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}