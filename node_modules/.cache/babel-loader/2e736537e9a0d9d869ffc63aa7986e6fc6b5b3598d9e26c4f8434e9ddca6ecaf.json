{"ast":null,"code":"import axios from \"axios\";\nimport { onMounted } from \"vue\";\nimport { BPagination } from \"bootstrap-vue\";\nexport default {\n  name: \"list\",\n  components: {\n    BPagination\n  },\n  data() {\n    return {\n      list: [],\n      editedInfo: {},\n      currentPage: 1,\n      perPage: 10\n    };\n  },\n  created() {\n    this.getAll();\n  },\n  methods: {\n    async getAll() {\n      try {\n        const ins = await axios.get(\"getList\");\n        this.list = ins.data;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async deleteBeneficiary(entryId) {\n      try {\n        const response = await axios.post(`deleteBeneficiary/${entryId}`);\n        if (response.status === 200) {\n          console.log(response.data.message);\n          this.getAll();\n        }\n      } catch (error) {\n        console.error(error.response.data.error);\n      }\n    },\n    async editBeneficiary(entryId) {\n      // Find the entry in the list based on entryId\n      const selectedEntry = this.list.find(entry => entry.ENTRY_ID === entryId);\n\n      // Set the editedInfo data\n      this.editedInfo = {\n        ...selectedEntry\n      };\n\n      // Show the modal\n      // Use nextTick to wait for the component to be mounted\n      this.$nextTick(() => {\n        const modal = new bootstrap.Modal(this.$refs.editModal);\n        modal.show();\n      });\n    },\n    async saveChanges() {\n      try {\n        // Send the updated data and ID to the backend\n        const response = await axios.post(`updateBeneficiary/${this.editedInfo.ENTRY_ID}`, {\n          region: this.editedInfo.REGION,\n          province: this.editedInfo.PROVINCE,\n          municipality: this.editedInfo.MUNICIPALITY,\n          fName: this.editedInfo.FIRST_NAME,\n          mName: this.editedInfo.MIDDLE_NAME,\n          lName: this.editedInfo.LAST_NAME,\n          bday: this.editedInfo.BIRTHDAY,\n          age: this.editedInfo.AGE,\n          sex: this.editedInfo.SEX\n        });\n        if (response.data) {\n          console.log(response.data.message);\n          const modal = new bootstrap.Modal(this.$refs.editModal);\n          modal.hide(); // Close the Bootstrap modal\n          this.getAll(); // Refresh the data\n        }\n      } catch (error) {\n        console.error(error.response.data.error);\n      }\n    },\n    closeModal() {\n      // Manually close the modal using JavaScript\n      const modal = new bootstrap.Modal(this.$refs.editModal);\n      modal.hide();\n    }\n  }\n};","map":{"version":3,"names":["axios","onMounted","BPagination","name","components","data","list","editedInfo","currentPage","perPage","created","getAll","methods","ins","get","error","console","log","deleteBeneficiary","entryId","response","post","status","message","editBeneficiary","selectedEntry","find","entry","ENTRY_ID","$nextTick","modal","bootstrap","Modal","$refs","editModal","show","saveChanges","region","REGION","province","PROVINCE","municipality","MUNICIPALITY","fName","FIRST_NAME","mName","MIDDLE_NAME","lName","LAST_NAME","bday","BIRTHDAY","age","AGE","sex","SEX","hide","closeModal"],"sources":["C:\\laragon\\www\\frontend\\src\\components\\admin\\list.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mt-5\">\r\n    <div class=\"row mt-5\">\r\n      <div\r\n        class=\"modal fade\"\r\n        id=\"editModal\"\r\n        tabindex=\"-1\"\r\n        aria-labelledby=\"editModalLabel\"\r\n        aria-hidden=\"true\"\r\n        ref=\"editModal\"\r\n      >\r\n        <div class=\"modal-dialog modal-lg\">\r\n          <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n              <h5 class=\"modal-title\" id=\"editModalLabel\">Edit Beneficiary</h5>\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn-close\"\r\n                data-bs-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n              ></button>\r\n            </div>\r\n            <form @submit.prevent=\"update\">\r\n              <div class=\"modal-body\">\r\n                <div class=\"mb-3\">\r\n                  <label for=\"editRegion\" class=\"form-label\">Region:</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    v-model=\"editedInfo.REGION\"\r\n                    class=\"form-control\"\r\n                    id=\"editRegion\"\r\n                  />\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                  <label for=\"editProvince\" class=\"form-label\">Province:</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    v-model=\"editedInfo.PROVINCE\"\r\n                    class=\"form-control\"\r\n                    id=\"editProvince\"\r\n                  />\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                  <label for=\"editMunicipality\" class=\"form-label\"\r\n                    >Municipality:</label\r\n                  >\r\n                  <input\r\n                    type=\"text\"\r\n                    v-model=\"editedInfo.MUNICIPALITY\"\r\n                    class=\"form-control\"\r\n                    id=\"editMunicipality\"\r\n                  />\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                  <label for=\"editFName\" class=\"form-label\">First Name:</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    v-model=\"editedInfo.FIRST_NAME\"\r\n                    class=\"form-control\"\r\n                    id=\"editFName\"\r\n                  />\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                  <label for=\"editMName\" class=\"form-label\">Middle Name:</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    v-model=\"editedInfo.MIDDLE_NAME\"\r\n                    class=\"form-control\"\r\n                    id=\"editMName\"\r\n                  />\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                  <label for=\"editFName\" class=\"form-label\">Last Name:</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    v-model=\"editedInfo.LAST_NAME\"\r\n                    class=\"form-control\"\r\n                    id=\"editFName\"\r\n                  />\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                  <label for=\"editBday\" class=\"form-label\">Birthday:</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    v-model=\"editedInfo.BIRTHDAY\"\r\n                    class=\"form-control\"\r\n                    id=\"editBday\"\r\n                  />\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                  <label for=\"editAge\" class=\"form-label\">Age:</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    v-model=\"editedInfo.AGE\"\r\n                    class=\"form-control\"\r\n                    id=\"editAge\"\r\n                  />\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                  <label for=\"editSex\" class=\"form-label\">Sex:</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    v-model=\"editedInfo.SEX\"\r\n                    class=\"form-control\"\r\n                    id=\"editSex\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"modal-footer\">\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-secondary\"\r\n                  id=\"close\"\r\n                  @click=\"closeModal\"\r\n                >\r\n                  Close\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  class=\"btn btn-primary\"\r\n                  @click=\"saveChanges\"\r\n                >\r\n                  Save changes\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"card-body\">\r\n        <div class=\"table-responsive\">\r\n          <table\r\n            class=\"table table-bordered\"\r\n            id=\"dataTable\"\r\n            width=\"100%\"\r\n            cellspacing=\"0\"\r\n          >\r\n            <thead>\r\n              <tr class=\"text-center\">\r\n                <th class=\"font-weight-bold\">ACTIONS</th>\r\n                <th class=\"font-weight-bold\">REGION</th>\r\n                <th class=\"font-weight-bold\">PROVINCE</th>\r\n                <th class=\"font-weight-bold\">MUNICIPALITY</th>\r\n                <th class=\"font-weight-bold\">BARANGAY</th>\r\n                <th class=\"font-weight-bold\">FIRSTNAME</th>\r\n                <th class=\"font-weight-bold\">MIDDLENAME</th>\r\n                <th class=\"font-weight-bold\">LASTNAME</th>\r\n                <th class=\"font-weight-bold\">HH_ID</th>\r\n                <th class=\"font-weight-bold\">ENTRY_ID</th>\r\n                <th class=\"font-weight-bold\">SEX</th>\r\n                <th class=\"font-weight-bold\">AGE</th>\r\n                <th class=\"font-weight-bold\">BIRTHDAY</th>\r\n                <th class=\"font-weight-bold\">CLIENT_STATUS</th>\r\n                <th class=\"font-weight-bold\">EXT_NAME</th>\r\n                <th class=\"font-weight-bold\">REGISTRATION_STATUS</th>\r\n                <th class=\"font-weight-bold\">HH_SET</th>\r\n                <th class=\"font-weight-bold\">SOLO_PARENT</th>\r\n                <th class=\"font-weight-bold\">IP_AFFILIATION</th>\r\n                <th class=\"font-weight-bold\">PREGNANCY_STATUS</th>\r\n                <th class=\"font-weight-bold\">HEALTH_FACILITY</th>\r\n                <th class=\"font-weight-bold\">CHILD_BENE</th>\r\n                <th class=\"font-weight-bold\">GRADE_LEVEL</th>\r\n                <th class=\"font-weight-bold\">ATTEND_SCHOOL</th>\r\n                <th class=\"font-weight-bold\">SCHOOL_NAME</th>\r\n                <th class=\"font-weight-bold\">MONITORED_EDUC</th>\r\n                <th class=\"font-weight-bold\">REASON_FOR_NOT_ATTENDING_EDUC</th>\r\n                <th class=\"font-weight-bold\">DATE_REASON_EDUC</th>\r\n                <th class=\"font-weight-bold\">MONITORED_HEALTH</th>\r\n                <th class=\"font-weight-bold\">\r\n                  REASON_FOR_NOT_ATTENDING_HEALTH\r\n                </th>\r\n                <th class=\"font-weight-bold\">DATE_REASON_HEALTH</th>\r\n                <th class=\"font-weight-bold\">DISABILITY_ID</th>\r\n                <th class=\"font-weight-bold\">DISABILITY_STATUS</th>\r\n                <th class=\"font-weight-bold\">LRN</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"info in list\" class=\"text-center\">\r\n                <td>\r\n                  <button\r\n                    @click=\"deleteBeneficiary(info.ENTRY_ID)\"\r\n                    class=\"btn btn-danger\"\r\n                    style=\"\r\n                      --bs-btn-padding-y: 0.25rem;\r\n                      --bs-btn-padding-x: 0.5rem;\r\n                      --bs-btn-font-size: 0.75rem;\r\n                    \"\r\n                  >\r\n                    <i class=\"fas fa-trash\"></i> DELETE\r\n                  </button>\r\n                  <button\r\n                    @click=\"editBeneficiary(info.ENTRY_ID)\"\r\n                    class=\"btn btn-primary\"\r\n                    style=\"\r\n                      --bs-btn-padding-y: 0.25rem;\r\n                      --bs-btn-padding-x: 0.5rem;\r\n                      --bs-btn-font-size: 0.75rem;\r\n                    \"\r\n                  >\r\n                    <i class=\"fas fa-edit\"></i> EDIT\r\n                  </button>\r\n                </td>\r\n                <td>{{ info.REGION }}</td>\r\n                <td>{{ info.PROVINCE }}</td>\r\n                <td>{{ info.MUNICIPALITY }}</td>\r\n                <td>{{ info.BRGY }}</td>\r\n                <td>{{ info.FIRST_NAME }}</td>\r\n                <td>{{ info.MIDDLE_NAME }}</td>\r\n                <td>{{ info.LAST_NAME }}</td>\r\n                <td>{{ info.HH_ID }}</td>\r\n                <td>{{ info.ENTRY_ID }}</td>\r\n                <td>{{ info.SEX }}</td>\r\n                <td>{{ info.AGE }}</td>\r\n                <td>\r\n                  {{\r\n                    info.BIRTHDAY\r\n                      ? new Date(info.BIRTHDAY).toLocaleDateString()\r\n                      : \"\"\r\n                  }}\r\n                </td>\r\n                <td>{{ info.CLIENT_STATUS }}</td>\r\n                <td>{{ info.EXT_NAME }}</td>\r\n                <td>{{ info.REGISTRATION_STATUS }}</td>\r\n                <td>{{ info.HH_SET }}</td>\r\n                <td>{{ info.SOLO_PARENT }}</td>\r\n                <td>{{ info.IP_AFFILIATION }}</td>\r\n                <td>{{ info.PREGNANCY_STATUS }}</td>\r\n                <td>{{ info.HEALTH_FACILITY }}</td>\r\n                <td>{{ info.CHILD_BENE }}</td>\r\n                <td>{{ info.GRADE_LEVEL }}</td>\r\n                <td>{{ info.ATTEND_SCHOOL }}</td>\r\n                <td>{{ info.SCHOOL_NAME }}</td>\r\n                <td>{{ info.MONITORED_EDUC }}</td>\r\n                <td>{{ info.REASON_FOR_NOT_ATTENDING_EDUC }}</td>\r\n                <td>\r\n                  {{\r\n                    info.DATE_REASON_EDUC\r\n                      ? new Date(info.DATE_REASON_EDUC).toLocaleDateString()\r\n                      : \"\"\r\n                  }}\r\n                </td>\r\n                <td>{{ info.MONITORED_HEALTH }}</td>\r\n                <td>{{ info.REASON_FOR_NOT_ATTENDING_HEALTH }}</td>\r\n                <td>\r\n                  {{\r\n                    info.DATE_REASON_HEALTH\r\n                      ? new Date(info.DATE_REASON_HEALTH).toLocaleDateString()\r\n                      : \"\"\r\n                  }}\r\n                </td>\r\n                <td>{{ info.DISABILITY_ID }}</td>\r\n                <td>{{ info.DISABILITY_STATUS }}</td>\r\n                <td>{{ info.LRN }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          <b-pagination\r\n            v-model=\"currentPage\"\r\n            :total-rows=\"list.length\"\r\n            :per-page=\"perPage\"\r\n            aria-controls=\"dataTable\"\r\n          ></b-pagination>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport { onMounted } from \"vue\";\r\nimport { BPagination } from \"bootstrap-vue\";\r\nexport default {\r\n  name: \"list\",\r\n  components: {\r\n    BPagination,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      list: [],\r\n      editedInfo: {},\r\n      currentPage: 1,\r\n      perPage: 10,\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.getAll();\r\n  },\r\n  methods: {\r\n    async getAll() {\r\n      try {\r\n        const ins = await axios.get(\"getList\");\r\n        this.list = ins.data;\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    async deleteBeneficiary(entryId) {\r\n      try {\r\n        const response = await axios.post(`deleteBeneficiary/${entryId}`);\r\n        if (response.status === 200) {\r\n          console.log(response.data.message);\r\n          this.getAll();\r\n        }\r\n      } catch (error) {\r\n        console.error(error.response.data.error);\r\n      }\r\n    },\r\n    async editBeneficiary(entryId) {\r\n      // Find the entry in the list based on entryId\r\n      const selectedEntry = this.list.find(\r\n        (entry) => entry.ENTRY_ID === entryId\r\n      );\r\n\r\n      // Set the editedInfo data\r\n      this.editedInfo = { ...selectedEntry };\r\n\r\n      // Show the modal\r\n      // Use nextTick to wait for the component to be mounted\r\n      this.$nextTick(() => {\r\n        const modal = new bootstrap.Modal(this.$refs.editModal);\r\n        modal.show();\r\n      });\r\n    },\r\n\r\n    async saveChanges() {\r\n      try {\r\n        // Send the updated data and ID to the backend\r\n        const response = await axios.post(\r\n          `updateBeneficiary/${this.editedInfo.ENTRY_ID}`,\r\n          {\r\n            region: this.editedInfo.REGION,\r\n            province: this.editedInfo.PROVINCE,\r\n            municipality: this.editedInfo.MUNICIPALITY,\r\n            fName: this.editedInfo.FIRST_NAME,\r\n            mName: this.editedInfo.MIDDLE_NAME,\r\n            lName: this.editedInfo.LAST_NAME,\r\n            bday: this.editedInfo.BIRTHDAY,\r\n            age: this.editedInfo.AGE,\r\n            sex: this.editedInfo.SEX,\r\n          }\r\n        );\r\n\r\n        if (response.data) {\r\n          console.log(response.data.message);\r\n          const modal = new bootstrap.Modal(this.$refs.editModal);\r\n          modal.hide(); // Close the Bootstrap modal\r\n          this.getAll(); // Refresh the data\r\n        }\r\n      } catch (error) {\r\n        console.error(error.response.data.error);\r\n      }\r\n    },\r\n\r\n    closeModal() {\r\n      // Manually close the modal using JavaScript\r\n      const modal = new bootstrap.Modal(this.$refs.editModal);\r\n      modal.hide();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}